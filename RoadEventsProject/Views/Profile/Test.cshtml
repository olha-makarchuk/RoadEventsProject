@model Event

@{
    ViewData["Title"] = "Create Event";
}

<h2>Create Event</h2>

<form asp-action="Create" method="post" enctype="multipart/form-data">
    <div class="form-group">
        <label for="Photo">Photo:</label>
        <input type="file" id="Photo" name="Photo" class="form-control" accept="image/*">
    </div>

    <div class="form-group">
        <label for="DescriptionEvent">Description:</label>
        <textarea id="DescriptionEvent" name="DescriptionEvent" class="form-control" rows="3"></textarea>
    </div>

    <div class="form-group">
        <label for="IdRegion">Region:</label>
        <select id="IdRegion" name="IdRegion" class="form-control">
            <option value="">Select Region</option>
            @foreach (var region in ViewBag.Regions)
            {
                <option value="@region.IdRegion">@region.NameRegion</option>
            }
        </select>
    </div>

    <div class="form-group">
        <label for="IdCityVillage">City or Village:</label>
        <select id="IdCityVillage" name="IdCityVillage" class="form-control" disabled>
            <option value="">Select City or Village</option>
        </select>
    </div>

    <div class="form-group">
        <label for="CreatedDate">Created Date:</label>
        <input type="date" id="CreatedDate" name="CreatedDate" class="form-control">
    </div>

    <button type="submit" class="btn btn-primary">Create Event</button>
</form>

@section Scripts {
    <script>
        $(document).ready(function () {
            $("#IdRegion").change(function () {
                var regionId = $(this).val();
                if (regionId) {
                    $.ajax({
                        url: '/Event/GetCitiesVillages',
                        data: { regionId: regionId },
                        type: 'GET',
                        success: function (data) {
                            $("#IdCityVillage").prop('disabled', false);
                            $("#IdCityVillage").empty();
                            $("#IdCityVillage").append('<option value="">Select City or Village</option>');
                            $.each(data, function (index, item) {
                                $("#IdCityVillage").append('<option value="' + item.idCityVillage + '">' + item.nameCityVillage + '</option>');
                            });
                        }
                    });
                } else {
                    $("#IdCityVillage").prop('disabled', true);
                    $("#IdCityVillage").empty();
                    $("#IdCityVillage").append('<option value="">Select City or Village</option>');
                }
            });
        });

    </script>
}
